{% extends 'health/base.html' %} 
{% load static %} 

{% block extra_css %}
<link rel="stylesheet" href="{% static 'health/css/styles.css' %}" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.css"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js"></script>

<style>
    :root {
        --primary-dark: #0C2340;
        --primary-light: #1B3B66;
        --primary-accent: #2C5494;
    }

    .auth-container {
        width: 100%;
        max-width: 1200px;
        display: flex;
        background: white;
        border-radius: 20px;
        overflow: hidden;
        box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        margin: 120px auto;
        min-height: 600px;
    }

    .auth-banner {
        flex: 1;
        background: linear-gradient(135deg, var(--primary-light), var(--primary-dark));
        padding: 40px;
        color: white;
        display: flex;
        flex-direction: column;
        justify-content: center;
    }
    .banner-logo {
    height: 60px;
    margin-bottom: 20px;
    filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.2));
    background: linear-gradient(45deg, #1B3B66, #2C5494);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
}


    .auth-form-container {
        flex: 2;
        padding: 40px;
        overflow-y: auto;
    }
    .auth-header {
    text-align: center;
    margin-bottom: 40px;
    padding: 20px;
    background: linear-gradient(135deg, var(--primary-light), var(--primary-dark));
    border-radius: 10px;
    color: white;
}

    .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
    }

    .form-group {
        margin-bottom: 20px;
    }

    .input-group {
        position: relative;
    }

    .input-group i {
        position: absolute;
        left: 15px;
        top: 50%;
        transform: translateY(-50%);
        color: #666;
    }

    .form-control {
        width: 100%;
        padding: 12px 15px 12px 45px;
        border: 2px solid #e1e1e1;
        border-radius: 10px;
        font-size: 1em;
        transition: all 0.3s ease;
    }

    .auth-btn {
        width: 100%;
        padding: 14px;
        background: var(--primary-light);
        color: white;
        border: none;
        border-radius: 10px;
        font-size: 1em;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-top: 20px;
    }

    .auth-btn:hover {
        background: var(--primary-accent);
    }

    .auth-footer {
        text-align: center;
        margin-top: 20px;
    }

    .auth-footer a {
        color: var(--primary-light);
        text-decoration: none;
        font-weight: 600;
    }

    .iti {
        width: 100%;
        display: block;
    }

    .iti__flag {
        background-image: url("https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/img/flags.png");
    }

    @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
        .iti__flag {
            background-image: url("https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/img/flags@2x.png");
        }
    }

    #phone {
        padding-left: 90px !important;
    }

    @media (max-width: 768px) {
        .auth-container {
            flex-direction: column;
            margin: 20px;
        }
        
        .form-row {
            grid-template-columns: 1fr;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="auth-container">
    <div class="auth-banner">
        <div class="banner-content">
          <img src="{% static 'health/images/logo1.png' %}" alt="Afyanyumbani Logo" class="banner-logo">
          <p>Join our healthcare community and experience personalized care at your fingertips.</p>
        </div>
    </div>
    <div class="auth-form-container">

        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-success">
                    <i class="fas fa-check-circle"></i>
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}

        <form method="post" action="{% url 'signup' %}">
            {% csrf_token %}
            <div class="form-row">
                <div class="form-group">
                    <label>First Name</label>
                    <div class="input-group">
                        <i class="fas fa-user"></i>
                        <input type="text" name="first_name" class="form-control" required>
                    </div>
                </div>
                <div class="form-group">
                    <label>Last Name</label>
                    <div class="input-group">
                        <i class="fas fa-user"></i>
                        <input type="text" name="last_name" class="form-control" required>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label>Email</label>
                <div class="input-group">
                    <i class="fas fa-envelope"></i>
                    <input type="email" name="email" class="form-control" required>
                </div>
            </div>

            <div class="form-group">
                <label>Mobile Number</label>
                <div class="input-group">
                    <input type="tel" id="phone" name="phone" class="form-control" required>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>Date of Birth</label>
                    <div class="input-group">
                        <i class="fas fa-calendar"></i>
                        <input type="date" name="date_of_birth" class="form-control" required>
                    </div>
                </div>
                <div class="form-group">
                    <label>Gender</label>
                    <div class="input-group">
                        <i class="fas fa-venus-mars"></i>
                        <select name="gender" class="form-control" required>
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label>Address</label>
                <div class="input-group">
                    <i class="fas fa-map-marker-alt"></i>
                    <input type="text" name="address" class="form-control" required>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>Password</label>
                    <div class="input-group">
                        <i class="fas fa-lock"></i>
                        <input type="password" name="password_hash" class="form-control" required>
                    </div>
                </div>
                <div class="form-group">
                    <label>Confirm Password</label>
                    <div class="input-group">
                        <i class="fas fa-lock"></i>
                        <input type="password" name="confirm_password" class="form-control" required>
                    </div>
                </div>
            </div>

            <button type="submit" class="auth-btn">Create Account</button>
        </form>

        <div class="auth-footer">
            <p>Already have an account? <a href="/login">Sign In</a></p>
        </div>

        <div class="social-login">
            <div class="divider">
                <div class="divider-line"></div>
                <div class="divider-text">Or connect with</div>
                <div class="divider-line"></div>
            </div>

            <div class="social-buttons">
                <a href="#" class="social-btn google">
                    <svg class="google-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="20px" height="20px">
                        <path fill="#FFC107" d="M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"/>
                        <path fill="#FF3D00" d="M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"/>
                        <path fill="#4CAF50" d="M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"/>
                        <path fill="#1976D2" d="M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"/>
                    </svg>
                    <span>Continue with Google</span>
                </a>
                <a href="#" class="social-btn facebook">
                    <i class="fab fa-facebook-f"></i>
                    <span>Continue with Facebook</span>
                </a>
                <a href="#" class="social-btn apple">
                    <i class="fab fa-apple"></i>
                    <span>Continue with Apple</span>
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    const phoneInputField = document.querySelector("#phone");
    const phoneInput = window.intlTelInput(phoneInputField, {
        preferredCountries: ["ke", "ug", "tz", "rw"],
        utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js",
    });
</script>
{% endblock %}
